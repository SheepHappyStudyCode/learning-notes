# 计算机网络

## time_wait 状态

在四报文挥手中，主动断开连接的一方在发送最后一次的确认报文后，不会立即进入 closed 状态，而是会进入 time_wait 状态。等待大约 2MSL（Maximum Segment Lifetime）后变为 closed 状态。

**原因：**

1. 主动断开连接的一方的确认信号可能会丢失，被动断开连接的一方在长时间没有收到确认信号后，会重新发送 FIN 报文，这时候如果主动断开连接的一方处在 time_wait 状态就可以**重传确认报文**。
2. TCP 连接断开后，可能还会有一些失效的或超时的报文仍在网络中传输，如果立即使用相同的 ip 和端口建立新的连接，可能会受到这些旧报文的影响。time_wait 状态可以**保证这些旧报文都超时失效后再建立新的连接**，避免数据混乱。