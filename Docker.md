# Docker
## 1 Docker介绍
1. 是一个开源的应用容器引擎。
2. docker是一种容器技术，解决软件跨环境迁移的问题。
## 2 Docker命令
### 2.1 镜像相关命令
1. 查看镜像：`docker images`
2. 搜索镜像：`docker search 镜像名`
	- 需要联网
3. 拉取镜像：`docker pull 镜像名 [版本号]`
4. 删除镜像：`docker rmi 镜像id`
### 2.2 容器相关命令
1. 查看容器：
	- 查看正在运行的容器：`docker ps`
	- `-a`选项：查看所有容器
	- `-q`：查看容器id
2. 创建容器：
	- 创建并进入容器（退出自动关闭）：`docker run -i -t --name 容器名 镜像名[:版本号] /bin/bash`
	- 创建后台容器：`docker run -id --name 容器名 镜像名`
3. 进入容器：`docker exec -it 容器名 /bin/bash`
4. 启动容器：`docker start 容器名`
5. 停止容器：`docker stop 容器名`
6. 删除容器：`docker rm 容器名 | 容器id`
7. 查看容器信息：`docker inspect 容器名`
## 3 容器数据卷
1. 定义：
	- 数据卷是宿主机的一个目录或文件。
	- 当容器目录和数据卷目录绑定后，对方的修改会立即同步。
	- 一个数据卷可以被多个容器同时挂载。
	- 一个容器也可以挂载多个数据卷。
2. 数据卷作用：
	- 容器数据持久化
	- 客户端和容器数据交换
	- 容器间数据交换
3. 配置数据卷：创建启动容器时，使用-v参数 设置数据卷
	- 目录必须是绝对路径
	- 如果目录不存在会自动创建
	- 可以挂载多个数据卷
4. 具体操作：`docker run ... -v 宿主机目录（文件）：容器内目录（文件）...`
5. 数据卷容器
	- 创建启动数据卷容器：`docker run ... -v /volumn ...`
	- 挂载数据卷容器：`docker run ...  --volumns-from 数据卷容器...`
## 4 docker应用部署
## 5 Dockerfile
### 5.1 Dockers镜像原理
docker镜像的本质是一个分层的文件系统，通过文件系统分层来实现复用。
### 5.2 通过容器制作镜像（不常用）
1. 容器转为镜像：`docker commit 容器id 镜像名称：版本号`
2. 将镜像文件压缩：`docker save -o 压缩文件名 镜像名称：版本号`
3. 恢复压缩文件为镜像：`docker load -i 压缩文件名`
### 5.3 通过dockerfile创建镜像（重要）
1. dockerfile概念：
	- 是一个文本文件。
	- 包含了一条条指令。
	- 每一条指令构建一层，基于基础镜像，最终构建出一个新的镜像。
2. 作用：编写dockerfile文件，然后基于dockerfile文件构建镜像，通过该镜像可以创建统一的容器。
3. 通过dockerfile文件构建镜像：`docker build -f dockfile的文件路径 -t 镜像名称:版本号 .`
## 6 Dockers服务编排
### 6.1 服务编排
1. 背景：微服务架构的应用系统中一般包含若干个微服务，每个微服务一般都会部署多个实例，如果每个微服务器都要手动启停，维护的工作量会很大。
### 6.2 Docker Compose

