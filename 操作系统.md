# 操作系统

## 进程和线程的区别

**进程**是**资源分配的基本单位**，主要由程序和 PCB 构成，是早期操作系统为了**实现多道程序运行**而建立的概念，一个进程可以包含多个线程。

**线程**，又称为**轻量进程**，是 **CPU 调度的基本单位**，因为进程的控制和通信的开销较大，为了**进一步提高程序执行的并发度**，创建了线程这个概念，同一个进程中的线程共享进程的资源。

## 进程的通信方式

### 匿名管道

一种**单向通信方**式，用于**父子进程**进行通信。

### 命名管道

支持**无亲缘关系**的进程进行通信。

### 消息队列

一个进程将消息发送到消息队列，另一个进程按顺序接收

### 共享内存

两个进程通过一个**公共的内存缓冲区**进行通信，数据交换速度快，但需要注意进程同步问题。

### 信号量

用一个数字代表资源的数量，提供 P（消耗信号量） 和 V（释放信号量） 两种原子操作，用于**进程同步**。

### 信号

一种**异步的通信方式**，用来**通知**进程发生了某个**事件**，常用于进程之间发送中断或禁止命令。

### 套接字 Socket

允许**不同主机的进程进行通信**，是网络通信的基础，也可以用做单台主机上不同进程的通信，适合传输大量数据的情景。

### 文件

通过读写同一个文件实现通信。

## 进程调度的算法

### 先来先服务

见名知意，哪个进程先进入就绪队列，就调度哪个进程。

### 短作业优先

优先执行占用 CPU 时间短的进程，这样的好处是使所有进程的平均响应时间最短，坏处是占用 CPU 长的进程可能一直得不到执行，陷入饥饿

### 优先权调度

根据进程的优先级进行调度，优先权越高，越容易被执行。

### 时间片轮转

给每个进程分配一定的时间片，时间片到了就换下一个进程执行，好处是提高系统的响应时间，多用于分时系统。

### 高响应比优先

这是一种**综合了先来先服务和短作业优先**的方法

> 如果都看作优先权调度的话，先来先服务的优先权由等待时间决定，等待时间越长，优先权越高；短作业的优先权由执行时间决定，执行时间越短，优先权越高。

高响应比优先权调度通过计算每个进程的响应比来计算优先权，`响应比 = （执行时间 + 等待时间） / 执行时间`。

可以发现，如果两个进程等待时间相同，那么执行短的进程限制性，体现短作业优先的特点；如果两个进程的执行时间相同，那么等待时间长的进程先执行，体现出先来先服务的特点。

### 多级反馈队列优先权调度